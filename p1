#include <stdio.h>
#include <mraa.h>
#include <i2c.h>

int main(void)
{
    
    // i2c
    mraa_i2c_context temp;
    temp= mraa_i2c_init(0);
    mraa_i2c_address(temp,0x40);
    
    // Analogica
    mraa_aio_context adc;
    luz=mraa_aio_init(0);
    float adc_value_float=0.0;
    
    float s=0,t=0,h=0,l=0;
    
    do
    {
        printf("Menu \n");
        printf("1.- Leer Temperatura\n");
        printf("2.- Leer Humedad\n");
        printf("3.- Leer Sensibilidad de Luz\n");
        printf("4.- Salir \n");
        scanf("%d",&s);
        
        switch(s)
        {
        
            case 1:
                printf("Temp: \n");
                rx_tx_buf[0]=0x03;
                rx_tx_buf[1]=0x11;
                mraa_i2c_write(i2c,rx_tx_buf,2);
                mraa_i2c_read_bytes_data(i2c,0x01,rx_tx_buf,2);
                x=(i2c/32)-50;
                printf("%d",&x);
                
                break;
                
            case 2:
                printf("Humedad: \n");
                rx_tx_buf[0]=0x03;
                rx_tx_buf[1]=0x01;
                mraa_i2c_write(i2c,rx_tx_buf,2);
                mraa_i2c_read_bytes_data(i2c,0x01,rx_tx_buf,2);
                x=(h/16)-24;
                
                break;
            
            case 3:
                printf("Luminidad: \n");
                adc_value_float=mraa_aio_read_float(adc);
                printf("%d",&adc_value_float);
                break;
        }
    }
    while(s!=4);
    
    
    return 0;
}
